# Linux实用指令

### 目录

1. [**Linux系统运行级别**](#t1):runner:

2. [**切换到指定运行级别的指令**](#t2):business_suit_levitating:

3. [**使用单用户运行级别找回root密码**](#t3):eight_pointed_black_star:

4. **[如果要让虚拟机每次启动直接进入某个级别](#t4)**:v:

5. [**帮助指令**](#t5):rescue_worker_helmet:

6. [**文件目录类**](#t6):file_cabinet:

7. [**时间日期类**](#t7):date:

8. [**搜索查找类**](#t8):mag_right:

   <hr>

* <span id="t1">**Linux系统运行级别**</span>

  * 0：关机

  * 1：单用户【可用于找回丢失密码】

  * 2：多用户状态无网络服务

  * 3：多用户状态有网络服务【常用】

  * 4：**系统未使用**保留给用户

  * 5：图形界面

  * 6：系统重启

    **常用运行级别是 3 和 5 要修改默认的运行级别可修改文件**

    **`/etc/inittab` 的 `id : 5:initdefault`这一行中的数字**

* <span id="t2">**切换到指定运行级别的指令**</span>

  * 基本语法`init n` n 为运行级别

* <span id="t3">**使用单用户运行级别找回root密码**</span>

  * 开机在引导界面(倒计时)按回车
  * 在新界面 按 `e`
  * 在新界面 选中第二行(kernel)按`e`
  * 在新界面最后一行输入`空格 1 回车`

  * 新界面按`b`重启
  * 进入了单用户系统级别
  * 使用`passwd`修改密码
  * `reboot`重启

* <span id="t4">**如果要让虚拟机每次启动直接进入某个级别**</span>

  > 可以设置可修改文件
  >
  > **`/etc/inittab` 的 `id : 5:initdefault`这一行中的数字**
  >
  > 如果不小心设置成了`id : 0` 可以通过如上修改密码的方法进入单用户
  >
  > 级别修改`/etc/inittab`文件设置回去。

* <span id="t5">**帮助指令**</span>

  * `man [指令或配置文件]`
  * `help [指令]`

* <span id="t6">**文件目录类**</span>

  * pwd指令

    > 显示当前工作目录的绝对路径

  * ls指令

    * 打印当前目录的文件

    * 基本语法

      `ls [选项] [目录或是文件]`

    * 常用选项

      `-a`：显示当前目录的所有文件和目录，包括隐藏的。

      `-l`：以列表的形式显示信息
      
      `-h`：按人们能读懂的方式表示文件大小(k, M, G)

  * cd 指令

    > 切换到指定目录

    * 基本语法`cd [参数]`

    * 常用参数

      `cd ~`或`cd`回到家目录

      `cd ..`回到上一级

  * mkdir 指令

    > 用于创建目录

    * 基本用法

      `mkdir [选项] 目录名`

    * 创建多级目录

      `mkdir -p 目录名1/目录名2`

  * rmdir 指令

    > 用于删除目录
    >
    > rmdir 删除的是空目录，如果目录下有内容则无法删除

    * 基本用法

      `rmdir [选项] 目录名`

    * 如果要删除非空的目录

      `rm -rf 目录`

  * touch 指令

    > touch指令创建空文件(可同时创建多个)

    * 基本语法`touch 文件名1 文件名2`

  * cp指令[**重点**]

    > cp 指令拷贝文件到指定目录

    * 基本用法

      `cp [选项] <源文件> <目标路径>(相对路径或绝对路径都可以)`

      `\cp [选项] <源文件> <目标路径>(相对路径或绝对路径都可以)`

      第二个是强制覆盖所有重复的文件

    * 常用选项

      `-r`递归复制整个文件夹

    * 案例

      > 将 home/test 整个目录拷贝到 home/aaa目录中(当前在home目录中)

      解决代码: `cp test aaa -r`

  * rm指令

    * 基本用法

      `rm [选项] 文件名`

    * 常用选项

      `-r`递归循环删除（删除目录和里面的文件）

      `-f`强制删除不提示

  * mv指令

    > 移动文件与目录或重命名

    * 基本语法

      重命名:`mv <oldFileName> <newFileName>`

      移动:`mv <oldFilePath> <newPath>`(可以在newPath中加上名字更矮移动后的文件名字)

  * cat指令

    > 查看文件内容,只能以**只读的方式打开**

    * 基本语法

      `cat [选项] <文件>`

    * 常用选项

      `-n` ：显示行号

      `cat [选项] <文件> | more`：分页显示

  * more指令

    > more指令是一个基于VI编辑器的文本过滤器，它以全屏幕的方式按页显示文本文件的内容。

    * 基本用法

      `more <要查看的文件>`

    * 操作说明
      * `空格`：向下翻一页
      * `Enter`：向下翻一行
      * `q`：退出
      * `Ctrl+f`：向下滚动一屏
      * `Ctrl+b`：向上滚动一屏
      * `=`：输出当前行的行号
      * `:f`：输出文件名和当前行的行号

  * less指令

    > less指令用来分屏查看文件内容，他的功能与more指令类似，但是比more指令更强大，支持各种显示终端。less指令在显示文件内容时，并不是一次将整个文件加载之后才显示，而是根据显示需要加载内容，对于显示大型文件具有较高的效率

    * 基本语法

      `less <文件>`

    * 操作说明
      * `空格`：向下翻动一页
      * `[pagedown]`：向下翻页
      * `[pageup]`：向上翻页
      * `/字串`：向下搜寻【字串】的功能:`n`向下查找`N`向上查找
      * `?字串`：向下搜寻【字串】的功能:`n`向下查找`N`向上查找
      * `q`：退出

  * `>`指令和`>>`指令

    > \>指令可以把某个指令运行的结果**覆盖**存储到某个文件中存储之后会把文件原来的内容覆盖掉
    >
    > \>\>指令可以把某个指令运行的结果**追加**存储到某个文件中存储之后会在文件原来的内容的基础上追加内容

    * 基本语法

      `指令 > <保存内容的文件>`

      `指令 >> <保存内容的文件>`
    
    * 案例
    
      > 将当前目录中的文件信息保存到message.txt
    
      1. 创建`message.txt`
    
         `touch message.txt`
    
      2. 将信息保存
    
         `ls -la > message.txt`

  * echo指令

    > echo指令输出内容到控制台

    * 基本语法

      `echo [选项] [输出内容]`

    * 案例输出环境变量到控制台

      `echo $PATH`

  * head指令

    > head用于显示文件的开头部分内容，默认情况下head指令显示文件的前10行

    * 基本语法

      `head <文件>`：查看文件的前10行内容

      `head -n x <文件>`：查看文件的前x行内容

  * tail指令

    > tail指令用于输出文件中尾部内容，默认情况下tail指令会显示文件的后10行内容

    * 基本语法

      `tail <文件>`：查看文件后10行内容

      `tail -n x <文件>`：查看文件后x行内容

      `tail -f <文件>`：实时追踪该文档的更新（-f 的只有在其输入为档案时才能使用 ）

  * `ln -s`指令

    > 软连接 ,类似于Windows里的快捷方式，主要存放了链接其他文件的路径

    * 基本用法

      `ln -s [源文件或目录][软连接名]`

    * 软连接的删除

      `rm -rf [软连接]`

  * `history`指令

    > 查看已经执行过的历史命令

    * 基本用法

      `history`：显示所有历史命令

      `history n`：显示最近使用的前n个指令

    * 案例

      > 显示最近使用的前10个指令

      `history 10`

      > 执行历史编号为5的指令

      `!5`：**注意！和 数字之间 *没有*  空格**

* <span id="t7">**时间日期类**</span>

  * 获取时间
    * `date`：显示当前时间
    * `date +%Y`：显示当前年
    * `date +%m`：显示当前月
    * `date +%d`：显示当前天
    * `date "+%Y-%m-%d %H:%M:%S"`：显示当前年月日时分秒

  * 设置时间

    * 基本语法

      `date -s "要设置的日期"`

    * 案例

      > 将时间设置为2019-2-26 11：22：22

      `date -s "2019-02-26 11:22:22"`

  * cal指令

    > 查看日历指令

    * 基本用法

      `cal [选项]`

    * 查看当本月日历

      `cal`

    * 查看2020一年的日历

      `cal 2020`

* <span id="t8">**搜索查找类**</span>

  * find指令

    > find指令将从指定目录向下递归地遍历其各个子目录，将满足条件的文件或目录显示在终端

    * 基本语法

      `find [搜索范围][选项]<要查找的文件>`

    * 常用选型

      `-name <查询方式>`：按文件名查找

      `-user <用户名>`：按用户查找

      `-size ` <大小>：按文件大小查找

      > -size的使用：
      >
      > 大于: +n
      >
      > 小于: -n
      >
      > 等于: n
      >
      > 单位表示:G，M(大写)，k(小写)

    * 案例

      > 查找/root目录中的hello.txt文件

      `find -name hello.txt`

      > 按文件的拥有着查找/opt中属于root用户的文件

      `find -user root`

      > 查找/home目录中大于20M的文件

      `find -size +20M`

      > 查找/home中txt文件

      `find /home -name *.txt`

  * locate指令

    > locate 指令可以快速定位文件路径。locate指令利用事先建立的系统中所有文件名及路径的locate数据库实现快速定位给定文件。locate指令无需遍历整个文件系统，速度查询较快。为了保证查询结果的准确度，管理员必须定期更新locate时刻。

    * 基本语法

      locate 搜索文件

    * 特别说明

      由于locate指令基于数据库查询，所以第一次运行前，必须使用`updatedb`来创建数据库文件。

    * 案例

      > 查找hello.txt文件

      ```
      # updatedb//创建数据库文件
      # locate hello.txt
      ```

      

  * 管道符号

    > 管道符，“|“，表示将管道符前面指令的处理结果输出传递给管道符后面的命令处理。

  * grep指令

    > grep过滤查找

    * 基本语法

      `grep [选项] 查找内容 源文件`

    * 常用选项

      `-n` ：显示匹配行及行号 

      `-i`：忽略字母大小写

    * 案例

      > 查找hello.txt 文件中，查找yes所在行并显示行号

      方案一：

      `grep -n yes hello.txt`

      方案二：

      `cat hello.txt | grep -n yes`

* 压缩和解压缩

  * gzip

    > 压缩文件只能将文件压缩为*.gz文件,默认不会保留原文件

    * 基本用法

      `gzip [文件1] [文件2] ..`

  * gunzip

    > 解压缩，默认不会保留原压缩包

    * 基本用法

      `gunzip [文件1]` [文件2]

  * zip

    > 压缩文件，项目打包常用,默认保留原文件

    * 基本用法

      `zip [选项] xxx.zip <要压缩的文件>`

    * 常用选项

      `-r`：递归压缩（压缩目录）

    * 案例

      > 将/home中的所有文件压缩为package.zip文件

  * unzip

    > 解压文件，默认保留原压缩包

    * 基本用法

      `unzip [选项] <压缩包>`

    * 常用选项

      `-d`：指定解压后将解压的文件放置的位置

  * tar 指令

    > tar指令可用于打包文件，打包后文件是*.tar.gz格式

    * 基本用法

      `tar [选项] xxx.tar.gz 打包的内容`

    * 常用选项

      > 以下选项指定了tar指令的行为必须有且仅有一个

      * `-c`：创建压缩文件
      * `-x`：解压
      * `-t`：查看内容
      * `-r`：向压缩归档文件末尾追加文件
      * `-u`：更新原压缩包中的文件

      > 下面的参数是根据需要在压缩或解压文件时可选的(除了-f)。

      * `-z`： 用gzip来压缩/解压缩文件，压缩后也一定要使用该选项进行解压缩。
      * `-f`：指定所用的档案的名字(这个选项要有并且要在最后)
      * `-Z(大写)`：调用compress执行压缩或解压缩
      * `-C(大写)`：指定压缩包/解压包完成的位置
      * `-j`：代表使用‘bzip2’程序进行文件的压缩
      * `-v`：显示与压缩/解压有关的文件

    * 案例

      > 将/home 中的a.txt和b.txt压缩为ab.tar.gz

      `tar -czvf ab.tar.gz a.txt b.txt`

      > 将ab.tar.gz解压到 /opt/目录

      `tar -xzvf ab.tar.gz -C /opt`